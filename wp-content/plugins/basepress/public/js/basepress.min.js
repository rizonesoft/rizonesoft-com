if(jQuery(document).ready(function(e){var s=[];function t(s){if(this.mainElement=s,this.form=s.find(".bpress-search-form"),this.searchField=s.find(".bpress-search-field"),this.searchNonce=this.form.find('input[name="search-nonce"]').val(),this.suggestions=s.find(".bpress-search-suggest"),this.product=this.searchField.data("product"),this.deviceHeight=Math.max(screen.height,screen.width),this.minDeviceHeight=this.suggestions.data("minscreen"),this.suggestEnabled=this.suggestions.length,this.skipSearchSuggestions=this.deviceHeight<this.minDeviceHeight,this.oldSearchInputValue="",this.min_chars=parseInt(basepress_vars.min_chars),this.timer=null,this.selection=-1,this.searchTerm="",this.language=this.form.find('input[name="lang"]').val(),this.foundPosts=0,this.suggestEnabled){var t=this;this.delay=function(e,s){clearTimeout(this.timer),this.timer=setTimeout(e,s)},this.searchField.on("keyup",t,function(s){if(!t.skipSearchSuggestions)switch(s.preventDefault(),s.keyCode){case 13:case 38:case 40:case 91:return;case 27:t.suggestions.hide(),t.selection=-1,t.updateSelection();break;default:if(t.searchTerm=e(this).val(),t.searchTerm==t.oldSearchInputValue)return;t.oldSearchInputValue=t.searchTerm,t.searchTerm&&t.searchTerm.length>=t.min_chars?t.basepressGetSuggestions(t.searchTerm,t.product):t.suggestions.html("").hide()}}),this.searchField.on("paste",t,function(e){t.searchTerm=e.originalEvent.clipboardData.getData("text"),t.searchTerm!=t.oldSearchInputValue&&(t.oldSearchInputValue=t.searchTerm,t.searchTerm&&t.searchTerm.length>=t.min_chars?t.basepressGetSuggestions(t.searchTerm,t.product):t.suggestions.html("").hide())}),e(document).on("mouseup",t,function(e){t.skipSearchSuggestions||t.suggestions.is(e.target)||0!==t.suggestions.has(e.target).length||(t.selection=-1,t.updateSelection(),t.suggestions.hide())}),this.searchField.on("click",t,function(s){if(!t.skipSearchSuggestions){if(t.searchTerm=e(this).val(),t.searchTerm&&t.searchTerm.length>=t.min_chars&&t.suggestions.children().length){t.suggestions.show();return}if(t.searchTerm&&t.searchTerm.length>=t.min_chars&&0==t.suggestions.children().length){t.basepressGetSuggestions(t.searchTerm,t.product);return}e(this).keyup()}}),this.mainElement.on("keydown",t,function(e){if(!t.skipSearchSuggestions&&(38==e.which||40==e.which||13==e.which))switch(e.preventDefault(),t.lastItem=t.suggestions.find("li").length-1,e.which){case 38:t.selection=t.selection-1<-1?-1:t.selection-=1,t.updateSelection();break;case 40:t.selection=t.selection+1>t.lastItem?t.lastItem:t.selection+=1,t.updateSelection();break;case 13:if(-1!=t.selection){t.link=t.suggestions.find("li").eq(t.selection).find("a"),t.link[0].click();break}t.form.submit()}}),this.suggestions.on("click",".bpress-search-suggest-more span",t,function(e){t.form.submit()})}this.updateSelection=function(){var e=this.suggestions.find("li");if(e.removeClass("selected"),-1!=this.selection){var s=e.eq(this.selection);s.addClass("selected");let t=this.suggestions.find("ul");t.scrollTop(s[0].offsetTop-t.height()/2)}},this.basepressGetSuggestions=function(s,t){this.form.addClass("searching");let i=this;e.ajax({type:"GET",url:basepress_vars.ajax_url,data:{action:"basepress_smart_search",terms:s,product:t,lang:i.language,nonce:i.searchNonce},success:function(e){e.html?(i.suggestions.html(e.html).show(),i.foundPosts=Number(e.foundPosts)):(i.suggestions.html("").hide(),i.foundPosts=0)},complete:function(){i.form.removeClass("searching"),basepress_vars.premium&&basepress_vars.log_search&&i.delay(function(){i.logSearch(s,i.product,i.foundPosts)},1e3)}})},basepress_vars.premium&&(this.logSearch=function(s,t){e.ajax({type:"GET",url:basepress_vars.ajax_url,data:{action:"basepress_log_ajax_search",terms:s,product:t,found_posts:this.foundPosts},success:function(e){},complete:function(){}})})}if(e(".bpress-search").each(function(i){s[i]=new t(e(this))}),basepress_vars.postID&&e.ajax({type:"POST",url:basepress_vars.ajax_url,data:{action:"basepress_update_views",postID:basepress_vars.postID,productID:basepress_vars.productID}}),e(".bpress-nav-section").click(function(s){if("A"!=s.target.nodeName){s.preventDefault(),s.stopPropagation();var t=e(this),i=e(this).children(".children"),a=30*i.children("li").length;a=(a=a<150?150:a)>750?750:a,i.slideToggle(a,function(){t.toggleClass("open")})}}),e(".bpress-nav-article").click(function(e){e.stopPropagation()}),e(".bpress-copy-link").click(function(s){let t=e(this);s.preventDefault(),history.pushState({},"",t.attr("href")),navigator.clipboard.writeText(new URL(window.location)),e("span.bpress-hl-tooltip").each(function(){e(this).text(e(this).data("bpress-copied-hl"))})}),e(".bpress-copy-link").mouseenter(function(s){let t=e(this);e("span.bpress-hl-tooltip").each(function(){e(this).detach().appendTo(t).text(e(this).data("bpress-copy-hl")).removeClass("hidden")})}).mouseleave(function(s){e("span.bpress-hl-tooltip").addClass("hidden").text("")}),basepress_vars.premium){function i(e){for(var s=e+"=",t=decodeURIComponent(document.cookie).split(";"),i=0;i<t.length;i++){for(var a=t[i];" "==a.charAt(0);)a=a.substring(1);if(0===a.indexOf(s))return a.substring(s.length,a.length)}return""}e(".bpress-votes button").hasClass("enabled")&&e(".bpress-votes").on("click","button",function(s){s.preventDefault();var t,a,n,r,c,o=e(this).data("post"),h=e(this).data("vote"),l=e(this).data("nonce");t=o,a=h,n=l,r=a,(c=e(".bpress-feedback").data("show"))&&("like_dislike"==c||r==c)&&e(".bpress-feedback").removeClass("hidden"),e.ajax({type:"GET",dataType:"json",url:basepress_vars.ajax_url,data:{action:"basepress_update_votes",post:t,vote:a,nonce:n},success:function(s){var a,n;s&&(function e(s){var t=i("basepress_votes");if(t=""===t?[]:t.split("|"),!i(s)){var a=new Date;a.setTime(a.getTime()+2592e6),t.push(s),t=t.join("|"),document.cookie="basepress_votes="+t+"; path=/;expires = "}}(t),a=s,e(".bpress-vote-like .bpress-vote").html(a.like).addClass("deactivated"),e(".bpress-vote-dislike .bpress-vote").html(a.dislike).addClass("deactivated"),(n=s).confirmation&&e(".bpress-votes-confirm").html(n.confirmation).addClass("show"))}}),e(".bpress-votes").off("click"),e(".bpress-votes button").addClass("disabled")}),e("#bpress-feedback-form").submit(function(s,t){if(s.preventDefault(),!(e(this).find("bpress-submit-feedback").hasClass("grecaptcha-invisible")&&!t||e("#bpress-feedback-password").val())){var i,a,n,r,c,o;i=t,a=e(".bpress-submit-feedback").data("post"),n=e("#bpress-feedback-message").val(),r=i||e("#g-recaptcha-response").val(),c=e("#bpress-feedback-email").val(),o=e("#nonce").val(),e(".bpress-feedback-textarea textarea, .bpress-submit-feedback").attr("disabled","disabled"),e(".bpress-feedback-textarea").addClass("sending"),e(".bpress-feedback-confirm").html("").removeClass("success fail"),e.ajax({type:"GET",dataType:"json",url:basepress_vars.ajax_url,data:{action:"basepress_submit_feedback",postID:a,feedback:n,grecaptcha:r,email:c,nonce:o},success:function(s){s&&(e(".bpress-feedback-confirm").html(s.message).removeClass("success fail").addClass(s.state),"success"==s.state&&e(".bpress-feedback").remove())},complete:function(){e(".bpress-feedback-textarea textarea, .bpress-submit-feedback").removeAttr("disabled"),e(".bpress-feedback-textarea").removeClass("sending")}})}}),!function(){var s=!1;function t(s){this.tocAnchor=e(".bpress-anchor-link"),this.tocList=s.find(".bpress-toc-list li>a"),this.tocAnchorOffsets=[],this.offset=50;var t=this;this.tocAnchor.each(function(s,i){t.tocAnchorOffsets.push(Math.round(e(i).offset().top-t.offset))}),this.setTocElement=function(){let s=t.tocAnchorOffsets.reduce(function(e,s,t,i){let a=window.scrollY;return a>e&&a<s?e:s},0),i=e(t.tocAnchor[t.tocAnchorOffsets.indexOf(s)]).data("index");e(t.tocList).removeClass("active"),e(t.tocList).filter('[data-index="'+i+'"]').addClass("active")}}e(window).on("scroll",function(i){s||(window.requestAnimationFrame(function(){e(".widget_basepress_toc_widget, .bpress-toc").each(function(s){e(this).find('.bpress-toc-list[data-highlight="true"]').length&&new t(e(this)).setTocElement()}),s=!1}),s=!0)})}()}}),basepress_vars.premium){function e(){jQuery(".bpress-submit-feedback").prop("disabled",!1)}function s(){jQuery(".bpress-submit-feedback").prop("disabled",!0)}function t(e){jQuery(".bpress-submit-feedback").trigger("click",e)}}